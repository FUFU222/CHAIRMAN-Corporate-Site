# .github/workflows/prod-deploy.yml
name: ğŸš€ Deploy to Xserver (Production)

# main ãƒ–ãƒ©ãƒ³ãƒã¸ã® push ã‹ã¤ public_html ä»¥ä¸‹ã®å¤‰æ›´ã§ã®ã¿ç™ºç«
on:
  push:
    branches:
      - main
    paths:
      - "public_html/**"

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      # ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
      - name: Checkout code
        uses: actions/checkout@v3

      # å…¬é–‹ãƒ•ã‚©ãƒ«ãƒ€ã‚’ FTPS/SFTP ã§åŒæœŸ
      - name: Deploy production folder via SFTP
        uses: SamKirkland/FTP-Deploy-Action@v4.3.5
        with:
          server: ${{ secrets.XSERVER_HOST }}
          username: ${{ secrets.XSERVER_USERNAME }}
          password: ${{ secrets.XSERVER_PASSWORD }}
          protocol: sftp
          local-dir: public_html/ # ãƒ­ãƒ¼ã‚«ãƒ«å´ã®å…¬é–‹ãƒ•ã‚©ãƒ«ãƒ€
          server-dir: public_html/ # ã‚µãƒ¼ãƒãƒ¼ä¸Šã®å…¬é–‹ãƒ•ã‚©ãƒ«ãƒ€
